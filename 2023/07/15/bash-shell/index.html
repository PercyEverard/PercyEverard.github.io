<!-- build time:Sun Aug 06 2023 08:08:15 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/xiaohei.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="fengyepiaosa" href="https://percyeverard.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="fengyepiaosa" href="https://percyeverard.github.io/atom.xml"><link rel="alternate" type="application/json" title="fengyepiaosa" href="https://percyeverard.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="linux,bash,shell"><link rel="canonical" href="https://percyeverard.github.io/2023/07/15/bash-shell/"><title>bash-shell - 知识大陆 - 编程拓展 | Percy Feng = fengyepiaosa = 记录生活！</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">bash-shell</h1><div class="meta"><span class="item" title="创建时间：2023-07-15 13:20:26"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-07-15T13:20:26+08:00">2023-07-15</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Percy Feng</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giclwuom7cj20zk0m8dvn.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giciundwu5j20zk0m8n9e.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gipetlbztpj20zk0m84qp.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gipeu1usa7j20zk0m8b29.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1gicitspjpbj20zk0m81ky.jpg"></li><li class="item" data-background-image="https://tva4.sinaimg.cn/large/6833939bly1giclfdu6exj20zk0m87hw.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E7%BC%96%E7%A8%8B%E6%8B%93%E5%B1%95/" itemprop="item" rel="index" title="分类于 编程拓展"><span itemprop="name">编程拓展</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E7%BC%96%E7%A8%8B%E6%8B%93%E5%B1%95/%E7%9F%A5%E8%AF%86%E5%A4%A7%E9%99%86/" itemprop="item" rel="index" title="分类于 知识大陆"><span itemprop="name">知识大陆</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://percyeverard.github.io/2023/07/15/bash-shell/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="Percy Everard"><meta itemprop="description" content="记录生活！, welcome to wenfeng's blog!"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="fengyepiaosa"></span><div class="body md" itemprop="articleBody"><p>过完 bash-shell 语法后，发现并不难。反倒是因为自己对于 Linux 的不熟悉，导致无法写出好的脚本！shell 就像是书架、Linux command 就像是书本，没有书本的点缀，书架形同虚设！<span class="exturl" data-url="aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzJTNBLy9naXRodWIuY29tL3NoZWxsaHViL2Jsb2cvaXNzdWVzLzg=">原文链接 - 知乎</span>、<span class="exturl" data-url="aHR0cHM6Ly9jb2RlYnVyc3QuaW8veW91ci1wZXJmZWN0LWtpY2tzdGFydC10by1zaGVsbC1zY3JpcHRpbmctODU3YjgxYzA5Mzli">Your Perfect Kickstart To Shell Scripting | by Madhav Bahl | codeburst</span></p><p><span id="more"></span></p><h1 id="第一个脚本"><a class="anchor" href="#第一个脚本">#</a> 第一个脚本</h1><p><code>script.sh</code></p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"My First Script!"</span></pre></td></tr></table></figure><p>运行脚本</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>$ <span class="token function">chmod</span> <span class="token number">755</span> script.sh </pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># $ chmod +x script.sh //IS BOTH OJBK!</span></pre></td></tr><tr><td data-num="3"></td><td><pre>$ ./script.sh</pre></td></tr></table></figure><p>以下是我们将在文章中讨论的一些要点。</p><ul><li>脚本解释器</li><li>变量</li><li>用户输入</li><li>测试</li><li>条件判断</li><li>循环语句</li><li>脚本参数传递</li><li>退出状态码</li><li>逻辑操作符</li><li>函数</li><li>通配符</li><li>调试</li></ul><p>所以，这将是我们讨论的顺序，在本文的最后，我相信你会有足够的信心编写自己的 shell 脚本：)</p><h1 id="1-脚本解释器"><a class="anchor" href="#1-脚本解释器">#</a> 1. 脚本解释器</h1><p>可以从上面脚本的第一行看到  <code>#!/bin/bash</code>  这行指定了你的程序将使用那个解释器，基本上是将路径引用到解释器。Linux/Unix 中有很多解释器，其中一些是：bash，zsh，sh，csh 和 ksh 等。</p><p>这里推荐一个玩命令行必须知道的一个开源项目<span class="exturl" data-url="aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzJTNBLy9naXRodWIuY29tL3JvYmJ5cnVzc2VsbC9vaC1teS16c2g="> oh-my-zsh</span></p><p>查看你的系统中有哪些脚本解释器</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">cat</span> /etc/shells</pre></td></tr></table></figure><ul><li>bash:  <code>#!/bin/bash</code></li><li>zsh:  <code>#!/bin/zsh</code></li><li>ksh:  <code>#!/bin/ksh</code></li><li>csh:  <code>#!/bin/csh</code></li><li>and so on…</li></ul><p><strong>注意⚠️</strong>如果脚本不包含解释器，则使用你的默认 shell 执行命令，因此代码可能正常运行，虽然是这样，但是不推荐这样做，使用 <code>echo $SHELL</code> 可以知道你当前使用的解释器</p><p>注释以 <code>#</code> 开始， <code>#</code> 后面的内容会被解释器忽略，但是 <code>#!</code> 另当别论</p><h1 id="2-变量"><a class="anchor" href="#2-变量">#</a> 2. 变量</h1><p>变量指向内存中的一块区域，变量有对应的变量名和值，可以存储一些可以在将来更改的数据，shell 中定义变量不需要指定变量的类型</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token assign-left variable">VARIABLE_NAME</span><span class="token operator">=</span><span class="token string">"Value"</span></pre></td></tr></table></figure><p>当命名一个变量是你必须记得以下几点 <em>变量名是区分大小写的</em><br>为了方便，变量名最好<strong>大写</strong></p><ul><li>要使用变量，必须在变量前面加 <code>$</code> 符号</li></ul><p><strong>例子</strong></p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">MY_NAME</span><span class="token operator">=</span><span class="token string">"shellhub"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"Hello, I am <span class="token variable">$MY_NAME</span>"</span></pre></td></tr></table></figure><p>OR</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">MY_NAME</span><span class="token operator">=</span><span class="token string">"shellhub"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"Hello, I am <span class="token variable">$&#123;MY_NAME&#125;</span>"</span></pre></td></tr></table></figure><p><strong>提示:</strong> 可以把命令执行后的输入结果赋值给一个变量</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token assign-left variable">LIST</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">SERVER_NAME</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">hostname</span><span class="token variable">)</span></span></pre></td></tr></table></figure><p><strong>合法的变量名</strong></p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token assign-left variable">THIS3VARIABLE</span><span class="token operator">=</span>”ABC”</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">THIS_IS_VARIABLE</span><span class="token operator">=</span>”ABC”</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">thisIsVariable</span><span class="token operator">=</span>”ABC”</pre></td></tr></table></figure><p><strong>不合法的变量名</strong></p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token assign-left variable">4Number</span><span class="token operator">=</span>”NUM”</pre></td></tr><tr><td data-num="2"></td><td><pre>This-Is-Var<span class="token operator">=</span>”VAR”</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># No special character apart from underscore is allowed!</span></pre></td></tr></table></figure><h1 id="3-用户输入"><a class="anchor" href="#3-用户输入">#</a> 3. 用户输入</h1><p><code>read</code>  命令接收键盘的输入，标准输入 (Standard Input)</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"PROMPT MESSAGE"</span> VARIABLE</pre></td></tr></table></figure><p>其中 <code>PROMPT MESSAGE</code> 为提示用户的信息，变量 <code>VARIABLE</code> 可以保存用户的输入，可以在程序中使用该变量</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Please Enter You Name: "</span> NAME</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"Your Name Is: <span class="token variable">$NAME</span>"</span></pre></td></tr></table></figure><h1 id="4-测试"><a class="anchor" href="#4-测试">#</a> 4. 测试</h1><p>测试主要用于条件判断。 <code>[ condition-to-test-for ]</code>  ，如 <code>[ -e /etc/passwd ]</code> ，<strong>注意的是 <code>[]</code> 前后必须有空格</strong>，如 <code>[-e /etc/passwd]</code> 是错误的写法！！！</p><h2 id="41-文件测试操作"><a class="anchor" href="#41-文件测试操作">#</a> 4.1 文件测试操作</h2><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token parameter variable">-d</span> FILE_NAM  <span class="token comment"># True if FILE_NAM is a directory</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token parameter variable">-e</span> FILE_NAM  <span class="token comment"># True if FILE_NAM exists</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token parameter variable">-f</span> FILE_NAM  <span class="token comment"># True if FILE_NAM exists and is a regular file</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token parameter variable">-r</span> FILE_NAM  <span class="token comment"># True if FILE_NAM is readable</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token parameter variable">-s</span> FILE_NAM  <span class="token comment"># True if FILE_NAM exists and is not empty</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token parameter variable">-w</span> FILE_NAM  <span class="token comment"># True if FILE_NAM has write permission</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token parameter variable">-x</span> FILE_NAM  <span class="token comment"># True if FILE_NAM is executable</span></pre></td></tr></table></figure><h2 id="42-字符串测试操作"><a class="anchor" href="#42-字符串测试操作">#</a> 4.2 字符串测试操作</h2><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token parameter variable">-z</span> STRING  <span class="token comment"># True if STRING is empty</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token parameter variable">-n</span> STRING  <span class="token comment"># True if STRING is not empty</span></pre></td></tr><tr><td data-num="3"></td><td><pre>STRING1 <span class="token operator">=</span> STRIN2 <span class="token comment"># True if strings are equal</span></pre></td></tr><tr><td data-num="4"></td><td><pre>STRING1 <span class="token operator">!=</span> STRIN2 <span class="token comment"># True if strings are not equal</span></pre></td></tr></table></figure><h2 id="43-算术测试操作"><a class="anchor" href="#43-算术测试操作">#</a> 4.3 算术测试操作</h2><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>var1 <span class="token parameter variable">-eq</span> var2  <span class="token comment"># True if var1 is equal to var2</span></pre></td></tr><tr><td data-num="2"></td><td><pre>var1 <span class="token parameter variable">-ne</span> var2  <span class="token comment"># True if var1 not equal to var2</span></pre></td></tr><tr><td data-num="3"></td><td><pre>var1 <span class="token parameter variable">-lt</span> var2  <span class="token comment"># True if var1 is less than var2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>var1 <span class="token parameter variable">-le</span> var2  <span class="token comment"># True if var1 is less than or equal to var2</span></pre></td></tr><tr><td data-num="5"></td><td><pre>var1 <span class="token parameter variable">-gt</span> var2  <span class="token comment"># True if var1 is greater than var2</span></pre></td></tr><tr><td data-num="6"></td><td><pre>var1 <span class="token parameter variable">-ge</span> var2  <span class="token comment"># True if var1 is greater than or equal to var2</span></pre></td></tr></table></figure><h1 id="5-条件判断"><a class="anchor" href="#5-条件判断">#</a> 5. 条件判断</h1><p>和其他编程语言一样，shell 脚本也能基于条件进行判断，我们可以使用 <code>if-else</code> 或 <code>if-elif-else</code></p><blockquote><p><code>if</code>  语句</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> condition-is-true <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token builtin class-name">command</span> N</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><blockquote><p><code>if-else</code></p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> condition-is-true <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">elif</span> <span class="token punctuation">[</span> condition-is-true <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">elif</span> <span class="token punctuation">[</span> condition-is-true <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">4</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><blockquote><p><code>case</code> 语句 <code>case</code> 可以实现和 <code>if</code> 一样的功能，但是当条件判断很多的时候，使用 <code>if</code> 不太方便，比如使用 <code>if</code> 进行值的比较</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">case</span> <span class="token string">"<span class="token variable">$VAR</span>"</span> <span class="token keyword">in</span></pre></td></tr><tr><td data-num="2"></td><td><pre>  pattern_1<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token comment"># commands when $VAR matches pattern 1</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  pattern_2<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token comment"># commands when $VAR matches pattern 2</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>  *<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment"># This will run if $VAR doesnt match any of the given patterns</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">esac</span></pre></td></tr></table></figure><p><strong>例子</strong></p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Enter the answer in Y/N: "</span> ANSWER</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">case</span> <span class="token string">"<span class="token variable">$ANSWER</span>"</span> <span class="token keyword">in</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">[</span>yY<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span>yY<span class="token punctuation">]</span><span class="token punctuation">[</span>eE<span class="token punctuation">]</span><span class="token punctuation">[</span>sS<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"The Answer is Yes :)"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token punctuation">[</span>nN<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span>nN<span class="token punctuation">]</span><span class="token punctuation">[</span>oO<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"The Answer is No :("</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  *<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"Invalid Answer :/"</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">esac</span></pre></td></tr></table></figure><p><strong>bash-shell 个人练习</strong></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Input your answer Y/N:"</span> answer</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"Answer you input is <span class="token variable">$&#123;answer&#125;</span>"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">case</span> <span class="token string">"<span class="token variable">$answer</span>"</span> <span class="token keyword">in</span></pre></td></tr><tr><td data-num="5"></td><td><pre>	<span class="token punctuation">[</span>yY<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>yY<span class="token punctuation">]</span><span class="token punctuation">[</span>eE<span class="token punctuation">]</span><span class="token punctuation">[</span>sS<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="6"></td><td><pre>		<span class="token builtin class-name">echo</span> <span class="token string">"look over your answer is yes:)"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>	<span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token punctuation">[</span>nN<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>nN<span class="token punctuation">]</span><span class="token punctuation">[</span>oO<span class="token punctuation">]</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>		<span class="token builtin class-name">echo</span> <span class="token string">"look over your answer is no:("</span></pre></td></tr><tr><td data-num="10"></td><td><pre>	<span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>	*<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="12"></td><td><pre>		<span class="token builtin class-name">echo</span> <span class="token string">"failed to check:("</span></pre></td></tr><tr><td data-num="13"></td><td><pre>	<span class="token punctuation">;</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token keyword">esac</span></pre></td></tr></table></figure><h1 id="6-迭代语句-循环"><a class="anchor" href="#6-迭代语句-循环">#</a> 6. 迭代语句 - 循环</h1><p>可以通过循环执行同一个代码块很多次</p><blockquote><p><code>for</code> 循环</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">VARIABLE_NAME</span> <span class="token keyword">in</span> ITEM_1 ITEM_N</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token builtin class-name">command</span> N</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">done</span></pre></td></tr></table></figure><blockquote><p><strong>Example</strong></p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">COLORS</span><span class="token operator">=</span><span class="token string">"red green blue"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">COLOR</span> <span class="token keyword">in</span> <span class="token variable">$COLORS</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token builtin class-name">echo</span> <span class="token string">"The Color is: <span class="token variable">$&#123;COLOR&#125;</span>"</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">done</span></pre></td></tr></table></figure><blockquote><p><strong>Another Example</strong></p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span> VAR<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>VAR<span class="token operator">&lt;</span>N<span class="token punctuation">;</span>VAR<span class="token operator">++</span> <span class="token punctuation">))</span></span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token builtin class-name">command</span> N</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">done</span></pre></td></tr></table></figure><p>在当前所有 txt 文件前面追加 <code>new</code> 实现重命名</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">FILES</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span> *txt<span class="token variable">)</span></span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token assign-left variable">NEW</span><span class="token operator">=</span><span class="token string">"new"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">FILE</span> <span class="token keyword">in</span> <span class="token variable">$FILES</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token builtin class-name">echo</span> <span class="token string">"Renaming <span class="token variable">$FILE</span> to new-<span class="token variable">$FILE</span>"</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token function">mv</span> <span class="token variable">$FILE</span> <span class="token variable">$NEW</span>-<span class="token variable">$FILE</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">done</span></pre></td></tr></table></figure><blockquote><p><code>while</code>  循环</p></blockquote><p>当所给的条件为 <code>true</code> 时，循环执行 <code>while</code> 里面的代码块</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">while</span> <span class="token punctuation">[</span> CONNDITION_IS_TRUE <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="3"></td><td><pre>  <span class="token comment"># Commands will change he entry condition</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token builtin class-name">command</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="8"></td><td><pre>  <span class="token builtin class-name">command</span> N</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">done</span></pre></td></tr></table></figure><p>判断条件可以是任意的测试或者命令，如果测试或命令返回 0，则表示条件成立，如果为非 0 则退出循环，如果一开始条件就不成立，则循环永远不会执行。<br>如果你不知道退出状态码是什么请不要担心，我后面会告诉你 😃</p><blockquote><p><strong>例子</strong> 一行一行读取文件内容</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">LINE</span><span class="token operator">=</span><span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">while</span> <span class="token builtin class-name">read</span> CURRENT_LINE</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$&#123;LINE&#125;</span>: <span class="token variable">$CURRENT_LINE</span>"</span></pre></td></tr><tr><td data-num="6"></td><td><pre>  <span class="token variable"><span class="token punctuation">((</span>LINE<span class="token operator">++</span><span class="token punctuation">))</span></span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">done</span> <span class="token operator">&lt;</span> /etc/passwd</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># This script loops through the file /etc/passwd line by line</span></pre></td></tr></table></figure><p><strong>注意⚠️</strong> <code>continue</code>  用于结束本次循环 <code>break</code>  用于结束整个循环</p><h1 id="7-参数传递"><a class="anchor" href="#7-参数传递">#</a> 7. 参数传递</h1><p>当我们运行脚本的时候，可以传递参数供脚本内部使用 <code>$ ./script.sh param1 param2 param3 param4</code> 这些参数将被存储在特殊的变量中</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable">$0</span> -- <span class="token string">"script.sh"</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token variable">$1</span> -- <span class="token string">"param1"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token variable">$2</span> -- <span class="token string">"param2"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token variable">$3</span> -- <span class="token string">"param3"</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token variable">$4</span> -- <span class="token string">"param4"</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token variable">$@</span> -- array of all positional parameters</pre></td></tr></table></figure><p>这些变量可以在脚本中的任何地方使用，就像其他全局变量一样</p><p>另外，还有几个特殊字符用来处理参数：</p><table><thead><tr><th>参数处理</th><th>说明</th></tr></thead><tbody><tr><td>$#</td><td>传递到脚本的参数个数</td></tr><tr><td>$*</td><td>以一个单字符串显示所有向脚本传递的参数。</td></tr><tr><td>$$</td><td>脚本运行的当前进程 ID 号</td></tr><tr><td>$!</td><td>后台运行的最后一个进程的 ID 号</td></tr><tr><td>$@</td><td>与 $* 相同，但是使用时加引号，并在引号中返回每个参数</td></tr><tr><td>$-</td><td>显示 Shell 使用的当前选项，与 set 命令功能相同</td></tr><tr><td>$?</td><td>显示最后命令的退出状态。0 表示没有错误，其他任何值表明有错误。</td></tr></tbody></table><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># author:Percy</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"Shell 传递参数实例！"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"第一个参数为：<span class="token variable">$1</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"参数个数为：<span class="token variable">$#</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"传递的参数作为一个字符串显示：<span class="token variable">$*</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token builtin class-name">command</span> input:</pre></td></tr><tr><td data-num="10"></td><td><pre>$ <span class="token function">chmod</span> +x test.sh </pre></td></tr><tr><td data-num="11"></td><td><pre>$ ./test.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>workstation output:</pre></td></tr><tr><td data-num="14"></td><td><pre>Shell 传递参数实例！</pre></td></tr><tr><td data-num="15"></td><td><pre>第一个参数为：1</pre></td></tr><tr><td data-num="16"></td><td><pre>参数个数为：3</pre></td></tr><tr><td data-num="17"></td><td><pre>传递的参数作为一个字符串显示：1 <span class="token number">2</span> <span class="token number">3</span></pre></td></tr></table></figure><p><strong>$* 与 $@ 区别：</strong></p><ul><li>相同点：都是引用所有参数。</li><li>不同点：只有在双引号中体现出来。假设在脚本运行时写了三个参数 1、2、3，则 &quot;*&quot; 等价于 &quot;1 2 3&quot;（传递了一个参数），而 &quot;@&quot; 等价于 &quot;1&quot; &quot;2&quot; &quot;3&quot;（传递了三个参数）。</li></ul><p>bash-shell 个人练习</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"parameter0 : <span class="token variable">$0</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"parameter1 : <span class="token variable">$1</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"parameter2 : <span class="token variable">$2</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"you have input <span class="token variable">$#</span> parameters"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$*</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="8"></td><td><pre>	<span class="token builtin class-name">echo</span> <span class="token variable">$i</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">j</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$@</span>"</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token keyword">do</span> </pre></td></tr><tr><td data-num="12"></td><td><pre>	<span class="token builtin class-name">echo</span> <span class="token variable">$j</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token assign-left variable">Num</span><span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token assign-left variable">NAMES</span><span class="token operator">=</span><span class="token string">"percy wenfeng everard"</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token keyword">for</span> <span class="token for-or-select variable">name</span> <span class="token keyword">in</span> <span class="token variable">$&#123;NAMES&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="19"></td><td><pre>	<span class="token builtin class-name">echo</span> <span class="token string">"class1 has student <span class="token variable">$&#123;name&#125;</span>"</span></pre></td></tr><tr><td data-num="20"></td><td><pre>	<span class="token variable"><span class="token punctuation">((</span>Num<span class="token operator">++</span><span class="token punctuation">))</span></span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"Num: <span class="token variable">$&#123;Num&#125;</span>"</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">for</span> <span class="token variable"><span class="token punctuation">((</span>val<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>val<span class="token operator">&lt;=</span>Num<span class="token punctuation">;</span>val<span class="token operator">++</span><span class="token punctuation">))</span></span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token keyword">do</span></pre></td></tr><tr><td data-num="25"></td><td><pre>	<span class="token builtin class-name">echo</span> <span class="token string">"val: <span class="token variable">$&#123;val&#125;</span>"</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token keyword">done</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token builtin class-name">echo</span> <span class="token string">"function exit successfully!"</span></pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>keyboard input:./myScript.sh <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token builtin class-name">command</span> output:</pre></td></tr><tr><td data-num="31"></td><td><pre>parameter0 <span class="token builtin class-name">:</span> ./third.sh</pre></td></tr><tr><td data-num="32"></td><td><pre>parameter1 <span class="token builtin class-name">:</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="33"></td><td><pre>parameter2 <span class="token builtin class-name">:</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="34"></td><td><pre>you have input <span class="token number">5</span> parameters</pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token number">1</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token number">2</span></pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token number">3</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token number">4</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token number">5</span></pre></td></tr><tr><td data-num="41"></td><td><pre>class1 has student percy</pre></td></tr><tr><td data-num="42"></td><td><pre>class1 has student wenfeng</pre></td></tr><tr><td data-num="43"></td><td><pre>class1 has student everard</pre></td></tr><tr><td data-num="44"></td><td><pre>Num: <span class="token number">3</span></pre></td></tr><tr><td data-num="45"></td><td><pre>val: <span class="token number">1</span></pre></td></tr><tr><td data-num="46"></td><td><pre>val: <span class="token number">2</span></pre></td></tr><tr><td data-num="47"></td><td><pre>val: <span class="token number">3</span></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">function</span> <span class="token builtin class-name">exit</span> successfully<span class="token operator">!</span></pre></td></tr></table></figure><h1 id="8-退出状态码"><a class="anchor" href="#8-退出状态码">#</a> 8. 退出状态码</h1><p>任何一个命令执行完成后都会产生一个退出状态码，范围 <code>0-255</code> ，状态码可以用来检查错误 <em>0 表示正确执行并正常退出</em><br>非 0 表示执行过程中出错，没有正常退出</p><p><strong>上一条命令执行后的退出状态码被保存在变量 <code>$?</code> 中</strong></p><blockquote><p><strong>例子</strong> 使用 <code>ping</code> 检查主机和服务器之间是否可以抵达</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token assign-left variable">HOST</span><span class="token operator">=</span><span class="token string">"google.com"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">ping</span> <span class="token parameter variable">-c</span> <span class="token number">1</span> <span class="token variable">$HOST</span>     <span class="token comment"># -c is used for count, it will send the request, number of times mentioned</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token assign-left variable">RETURN_CODE</span><span class="token operator">=</span><span class="token variable">$?</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$RETURN_CODE</span>"</span> <span class="token parameter variable">-eq</span> <span class="token string">"0"</span> <span class="token punctuation">]</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token keyword">then</span></pre></td></tr><tr><td data-num="7"></td><td><pre>  <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$HOST</span> reachable"</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token keyword">else</span></pre></td></tr><tr><td data-num="9"></td><td><pre>  <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$HOST</span> unreachable"</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token keyword">fi</span></pre></td></tr></table></figure><blockquote><p><strong>自定义退出状态码</strong>默认的状态码是上一条命令执行的结果，我们可以通过 <code>exit</code> 来自定义状态码</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token builtin class-name">exit</span> <span class="token number">0</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token builtin class-name">exit</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">exit</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>  <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="5"></td><td><pre>  <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token builtin class-name">exit</span> <span class="token number">255</span></pre></td></tr></table></figure><h1 id="9-逻辑操作符"><a class="anchor" href="#9-逻辑操作符">#</a> 9. 逻辑操作符</h1><p>shell 脚本支持逻辑与和逻辑或<br>逻辑与  <code>&amp;&amp;</code> 逻辑或  <code>||</code></p><p>Example <code>mkdir tempDir &amp;&amp; cd tempDir &amp;&amp; mkdir subTempDir</code> 这个例子中，如果创建 tempDir 成功，执行后面的 <code>cd</code> ，继续创建 subTempDir</p><h1 id="10-函数"><a class="anchor" href="#10-函数">#</a> 10. 函数</h1><p>可以把一些列的命令或语句定义在一个函数内，从程序的其他地方调用</p><p><strong>注意⚠️</strong> <em>函数包含了一些列你要重复调用的指令 (函数必须先定义后调用)</em></p><blockquote><p><strong>语法</strong></p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token keyword">function</span> <span class="token function-name function">function_name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token builtin class-name">command</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token builtin class-name">command</span> <span class="token number">2</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token builtin class-name">command</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="5"></td><td><pre>      <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="6"></td><td><pre>      <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token builtin class-name">command</span> N</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure><blockquote><p><strong>调用函数</strong> 简单的给出函数名字</p></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function-name function">myFunc</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token builtin class-name">echo</span> <span class="token string">"Shell Scripting Is Fun!"</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>myFunc <span class="token comment"># call</span></pre></td></tr></table></figure><h1 id="11-函数参数传递"><a class="anchor" href="#11-函数参数传递">#</a> 11. 函数参数传递</h1><p>和脚本一样，也可以给函数传递参数完成特殊的任务，第一个参数存储在变量 <code>$1</code> 中，第二个参数存储在变量 <code>$2</code> 中...， <code>$@</code> 存储所有的参数，参数之间使用空格分割  <code>myFunc param1 param2 param3 ...</code></p><p><strong>变量的作用范围</strong></p><p><strong>全局变量:</strong> 默认情况下，shell 中的变量都定义为全局变量，你可以从脚本中的任何位置使用变量，但是变量在使用之前必须先定义<strong>本地变量:</strong> 本地变量只能在方法内部访问，可以通过 <code>local</code> 关键词定义一个本地变量，定义一个本地变量的最佳实践是在函数内部</p><h1 id="12-通配符"><a class="anchor" href="#12-通配符">#</a> 12. 通配符</h1><p>使用通配符可以完成特定的匹配</p><blockquote><ol><li>一些常用的通配符 <code>*</code>  可以通配一个或多个任意字符</li></ol></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>*.txt</pre></td></tr><tr><td data-num="2"></td><td><pre>hello.*</pre></td></tr><tr><td data-num="3"></td><td><pre>great*.md</pre></td></tr></table></figure><blockquote><ol start="2"><li><code>?</code> 匹配一个字符</li></ol></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>?.md</pre></td></tr><tr><td data-num="2"></td><td><pre>Hello?</pre></td></tr></table></figure><blockquote><ol start="3"><li><code>[]</code> 匹配括号内部的任意一个字符</li></ol></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>He<span class="token punctuation">[</span>loym<span class="token punctuation">]</span>, <span class="token punctuation">[</span>AIEOU<span class="token punctuation">]</span></pre></td></tr></table></figure><blockquote><ol start="4"><li><code>[!]</code> 不匹配括号内的任何字符</li></ol></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token variable"><span class="token variable">`</span><span class="token punctuation">[</span><span class="token operator">!</span>aeiou<span class="token punctuation">]</span><span class="token variable">`</span></span></pre></td></tr></table></figure><p><strong>预先定义的通配符</strong> [[:alpha:]]<br>[[:alnum:]] [[:space:]]<br>[[:upper:]] [[:lower:]]<br>[[:digit:]]</p><p><strong>匹配通配符</strong> 有些情况下我们想匹配 <code>*</code> 或 <code>?</code> 等特殊字符，可以使用转义字符 <code>\*\?</code></p><h1 id="13-调试"><a class="anchor" href="#13-调试">#</a> 13. 调试</h1><p>bash 提供一些可选项帮助你调试程序</p><blockquote><p>Some Options:</p></blockquote><p>1.  <code>-x</code>  option<br>它在执行时打印命令和参数。它被称为打印调试，跟踪或 x 跟踪。我们可以通过修改第一行来使用它</p><p>2.  <code>-e</code>  option<br>它代表 “出错”。如果命令以非零退出状态退出，这将导致脚本立即退出。</p><p>3.  <code>-v</code>  option<br>它在读取时打印 shell 命令 / 输入行。</p><p>注意：这些选项可以组合使用，一次可以使用多个选项！</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token shebang important">#!/bin/bash-xe</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#!/bin/bash-ex</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#!/bin/bash-x-e</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#!/bin/bash-e-x</span></pre></td></tr></table></figure><p>尽管有许多工具可用于帮助调试，但只有在了解其工作原理的情况下才能调试代码。所以，确保花足够的时间实际练习编写脚本并自己调试它们，这样你就可以知道你可以犯错误的地方，这样你就不会再这样做：)</p><div class="tags"><a href="/tags/linux/" rel="tag"><i class="ic i-tag"></i> linux</a> <a href="/tags/bash/" rel="tag"><i class="ic i-tag"></i> bash</a> <a href="/tags/shell/" rel="tag"><i class="ic i-tag"></i> shell</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-07-31 13:34:56" itemprop="dateModified" datetime="2023-07-31T13:34:56+08:00">2023-07-31</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Percy Everard <i class="ic i-at"><em>@</em></i>fengyepiaosa</li><li class="link"><strong>本文链接：</strong> <a href="https://percyeverard.github.io/2023/07/15/bash-shell/" title="bash-shell">https://percyeverard.github.io/2023/07/15/bash-shell/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/07/07/obsidian-markdown%E9%A1%B5%E5%86%85%E8%B7%B3%E8%BD%AC/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1gipesx5fdwj20zk0m81kx.jpg" title="obsidian-markdown页内跳转"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 博客历程</span><h3>obsidian-markdown页内跳转</h3></a></div><div class="item right"><a href="/2023/07/20/Linux%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva4.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giclh5u05ej20zk0m87df.jpg" title="Linux系统目录结构"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 知识大陆</span><h3>Linux系统目录结构</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E8%84%9A%E6%9C%AC"><span class="toc-number">1.</span> <span class="toc-text">第一个脚本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E8%84%9A%E6%9C%AC%E8%A7%A3%E9%87%8A%E5%99%A8"><span class="toc-number">2.</span> <span class="toc-text">1. 脚本解释器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%8F%98%E9%87%8F"><span class="toc-number">3.</span> <span class="toc-text">2. 变量</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E7%94%A8%E6%88%B7%E8%BE%93%E5%85%A5"><span class="toc-number">4.</span> <span class="toc-text">3. 用户输入</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E6%B5%8B%E8%AF%95"><span class="toc-number">5.</span> <span class="toc-text">4. 测试</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-%E6%96%87%E4%BB%B6%E6%B5%8B%E8%AF%95%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.</span> <span class="toc-text">4.1 文件测试操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%B5%8B%E8%AF%95%E6%93%8D%E4%BD%9C"><span class="toc-number">5.2.</span> <span class="toc-text">4.2 字符串测试操作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-%E7%AE%97%E6%9C%AF%E6%B5%8B%E8%AF%95%E6%93%8D%E4%BD%9C"><span class="toc-number">5.3.</span> <span class="toc-text">4.3 算术测试操作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="toc-number">6.</span> <span class="toc-text">5. 条件判断</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E8%BF%AD%E4%BB%A3%E8%AF%AD%E5%8F%A5-%E5%BE%AA%E7%8E%AF"><span class="toc-number">7.</span> <span class="toc-text">6. 迭代语句 - 循环</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-number">8.</span> <span class="toc-text">7. 参数传递</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E9%80%80%E5%87%BA%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">9.</span> <span class="toc-text">8. 退出状态码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6"><span class="toc-number">10.</span> <span class="toc-text">9. 逻辑操作符</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E5%87%BD%E6%95%B0"><span class="toc-number">11.</span> <span class="toc-text">10. 函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="toc-number">12.</span> <span class="toc-text">11. 函数参数传递</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#12-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">13.</span> <span class="toc-text">12. 通配符</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#13-%E8%B0%83%E8%AF%95"><span class="toc-number">14.</span> <span class="toc-text">13. 调试</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/2023/07/15/bash-shell/" rel="bookmark" title="bash-shell">bash-shell</a></li><li><a href="/2023/07/31/Linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" rel="bookmark" title="Linux常用指令">Linux常用指令</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Percy Everard" data-src="/images/avatar.png"><p class="name" itemprop="name">Percy Everard</p><div class="description" itemprop="description">welcome to wenfeng's blog!</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">68</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">25</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">55</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BlcmN5ZXZlcmFyZA==" title="https:&#x2F;&#x2F;github.com&#x2F;percyeverard"><i class="ic i-github"></i></span> <span class="exturl item instagram" data-url="aHR0cHM6Ly9pbnN0YWdyYW0uY29tL2NoYXJsZXNmZW5n" title="https:&#x2F;&#x2F;instagram.com&#x2F;charlesfeng"><i class="ic i-instagram"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/07/07/obsidian-markdown%E9%A1%B5%E5%86%85%E8%B7%B3%E8%BD%AC/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/07/20/Linux%E7%B3%BB%E7%BB%9F%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; 2021 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-wenfeng"></i> </span><span class="author" itemprop="copyrightHolder">Percy Everard @ Percy Feng</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">151k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:17</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/07/15/bash-shell/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->