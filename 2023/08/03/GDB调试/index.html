<!-- build time:Wed Dec 13 2023 12:22:09 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="fengyepiaosa" href="https://percyeverard.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="fengyepiaosa" href="https://percyeverard.github.io/atom.xml"><link rel="alternate" type="application/json" title="fengyepiaosa" href="https://percyeverard.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="gcc,gdb,c"><link rel="canonical" href="https://percyeverard.github.io/2023/08/03/GDB%E8%B0%83%E8%AF%95/"><title>GDB 调试 - 编程拓展 | Percy Feng = fengyepiaosa = Neuromancer</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">GDB 调试</h1><div class="meta"><span class="item" title="创建时间：2023-08-03 21:42:18"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-08-03T21:42:18+08:00">2023-08-03</time></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Percy Feng</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="https://s2.loli.net/2023/08/09/PKv8zIDacZ6qbJj.jpg"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E7%BC%96%E7%A8%8B%E6%8B%93%E5%B1%95/" itemprop="item" rel="index" title="分类于 编程拓展"><span itemprop="name">编程拓展</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://percyeverard.github.io/2023/08/03/GDB%E8%B0%83%E8%AF%95/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/magic.png"><meta itemprop="name" content="Percy Everard"><meta itemprop="description" content="Neuromancer, Really start to record my life, no longer lazy!"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="fengyepiaosa"></span><div class="body md" itemprop="articleBody"><p>用了 Vscode 这么久才注意到它内置的 terminal 原来就是 PowerShell，gdb 和 gcc 在安装之初设置成了全局环境变量，所以可以在 terminal 和 PowerShell 里执行对应 command。其实 gdb 和 gcc 也并没有什么需要学的，就跟 API 般，知道它们有什么功能到时候去搜寻命令就行了，不同的是它们命令少且容易理解。</p><p>为了方便查询，先将调试经常用到的命令还有编译过程<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI4MzUxNjA5L2FydGljbGUvZGV0YWlscy8xMTQ4NTU2MzA="> pin</span> 在下面。</p><table><thead><tr><th style="text-align:center">调试命令</th><th style="text-align:center">作用</th></tr></thead><tbody><tr><td style="text-align:center">break (b)</td><td style="text-align:center">在源代码指定的某一行设置断点，其中 xxx 用于指定具体打断点位置</td></tr><tr><td style="text-align:center">run (r）</td><td style="text-align:center">执行被调试的程序，其会自动在第一个断点处暂停执行。</td></tr><tr><td style="text-align:center">continue (c）</td><td style="text-align:center">当程序在某一断点处停止后，用该指令可以继续执行，直至遇到断点或者程序结束。</td></tr><tr><td style="text-align:center">next (n)</td><td style="text-align:center">令程序一行代码一行代码的执行。</td></tr><tr><td style="text-align:center">step（s）</td><td style="text-align:center">如果有调用函数，进入调用的函数内部；否则，和 next 命令的功能一样。</td></tr><tr><td style="text-align:center">until (u) location</td><td style="text-align:center">当你厌倦了在一个循环体内单步跟踪时，单纯使用 until 命令，可以运行程序直到退出循环体。until n 命令中，n 为某一行代码的行号，该命令会使程序运行至第 n 行代码处停止。</td></tr><tr><td style="text-align:center">print (p）</td><td style="text-align:center">打印指定变量的值，其中 xxx 指的就是某一变量名。</td></tr><tr><td style="text-align:center">list (l)</td><td style="text-align:center">显示源程序代码的内容，包括各行代码所在的行号。</td></tr><tr><td style="text-align:center">finish（fi）</td><td style="text-align:center">结束当前正在执行的函数，并在跳出函数后暂停程序的执行。</td></tr><tr><td style="text-align:center">return（return）</td><td style="text-align:center">结束当前调用函数并返回指定值，到上一层函数调用处停止程序执行。</td></tr><tr><td style="text-align:center">jump（j)</td><td style="text-align:center">使程序从当前要执行的代码处，直接跳转到指定位置处继续执行后续的代码。</td></tr><tr><td style="text-align:center">quit (q)</td><td style="text-align:center">终止调试。</td></tr></tbody></table><p><img data-src="https://s2.loli.net/2023/08/10/rkhd9I3RPBniK4e.png" alt="预处理-编译-汇编-链接.png"></p><p>以下是这篇文章的目录，虽然说无法跳转到指定的地方阅读，但看来结构清晰，方便理解。</p><ol><li>Before Study<ol><li>GCC 简单使用</li><li>GCC 使用须知</li></ol></li><li>gdb 使用流程<ol><li>启动 gdb</li><li>查看源码</li><li>运行程序</li><li>设置断点</li><li>单步执行</li><li>查看变量</li><li>退出 gdb</li></ol></li><li>gdb 基本命令<ol><li>运行命令</li><li>设置断点</li><li>查看源码</li><li>打印表达式</li><li>查看运行信息</li><li>分割窗口</li></ol></li></ol><hr><h1 id="before-study"><a class="anchor" href="#before-study">#</a> Before Study</h1><h2 id="gcc简单使用"><a class="anchor" href="#gcc简单使用">#</a> GCC 简单使用</h2><p>在学习 gdb 调试之前，应该了解一下 C/C<ins> 的编译过程。注意如果是 C</ins> 使用 g<ins> 命令；如果为 C 语言，可使用 g</ins>，也可使用 gcc。</p><blockquote><ol><li>如果直接变成可执行文件 EXE 的话，可以有三条路走</li></ol></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">1</span>. g++ test_gcc.cpp <span class="token parameter variable">-o</span> <span class="token builtin class-name">test</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token number">2</span>. c++ test_gcc.cpp <span class="token parameter variable">-o</span> test_gcc</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token number">3</span>. gcc test_gcc.cpp -lstdc++ <span class="token parameter variable">-o</span> test_gcc</pre></td></tr></table></figure><p>也就是说 gcc、g++、C++ 这三条 command 都是可以被 execute 的，并生成对应的 EXE 文件。如果想 EXE 程序在运行的时候停留在屏幕上的话，建议在代码末尾加上 system pause。不过我现在学习 C/C++ 语言也很少用到小黑窗了。</p><blockquote><ol start="2"><li>如果想要把多个源码文件编译链接成可执行文件的话，只是在输出改变 cpp 文件的数量而已，其中是不需要加上 H 文件的，这是因为# include 已经替代了 H 头文件。只要你在程序中包含了头文件的话，就不需要再在 DOS 中写它啦！</li></ol></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>g++ hellospeak.cpp speak.cpp <span class="token parameter variable">-o</span> hellospeak</pre></td></tr></table></figure><blockquote><ol start="3"><li>如果想要使用 gdb 调试的话，只需要加上 - g</li></ol></blockquote><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>g++ <span class="token parameter variable">-g</span> 文件名.cpp</pre></td></tr></table></figure><p>在这篇文章中，我们使用的命令是：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>gcc <span class="token parameter variable">-g</span> test.c <span class="token parameter variable">-o</span> <span class="token builtin class-name">test</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment"># equals to</span></pre></td></tr><tr><td data-num="3"></td><td><pre>gcc <span class="token parameter variable">-g</span> test.c</pre></td></tr><tr><td data-num="4"></td><td><pre>gcc <span class="token parameter variable">-o</span> <span class="token builtin class-name">test</span></pre></td></tr></table></figure><blockquote><ol start="4"><li>运行也说一下，生成一个 EXE 文件不需要自己傻乎乎去在文件夹下运行文件，只需要在 DOS 命令行下执行就行了。比如 a.exe 并回车，即可执行由 HelloWorld.cpp 编译链接生成的程序。如果是在 Linux 下，则使用 <strong>./a.out</strong> 运行</li></ol></blockquote><h2 id="gcc使用须知"><a class="anchor" href="#gcc使用须知">#</a> GCC 使用须知</h2><ol><li><p>中断程序 -- 如果代码量过大，或者进入死循环，可以使用 <strong>Ctrl+z</strong> 终止程序</p></li><li><p>如果运行程序需要输入过多的命令，那么事先将测试数据存储到 TXT 文件中不失是一个好的办法。运行的时候直接读取 TXT 文件即可</p><ol><li>比如说 <code>helloworld.exe &lt;input.txt&gt; out.txt</code></li></ol></li><li><p>如果使用上述的 gcc 或者 g++ 编译的话，那么直接生成可执行文件 EXE，中间的过程省略掉了。一般 IDE 运行 cpp 文件还会生成 Obj 文件。如果你也想在 DOS 命令行下生成 obj 文件的话，需要加上 - c。</p><ol><li>gcc -c helloworld.cpp -o helloworld</li><li>obj 文件可以抽取出来作为库文件（像 C++ 自带库文件一样可以用 #include &lt;&gt; 调用？）<ol><li>ar 配合参数 -r 可以创建一个新库。如果存在即覆盖。这里生成新的模块，感觉也没多大用处，在其他地方调用用的也是 extern，用法就和调用其他 cpp 文件的变量或者函数一样。可能在大型文件下，这些已经编译过的文件是不需要改动的，并且每次编译可能浪费资源，所以事先编译汇编链接吧？（我的理解）</li></ol></li></ol></li></ol><p><img data-src="https://s2.loli.net/2023/08/10/rkhd9I3RPBniK4e.png" alt="预处理-编译-汇编-链接.png"></p><ol start="4"><li>既然我上面可以输出 O 文件，我同样也可以生成 i 文件，用 - E，如上图。但是注意，DOS 区分大小写，不能写成 - e。除了 i 文件还有汇编文件 s 文件，生成的汇编语言依赖于编译器的目标平台。</li></ol><h1 id="gdb使用流程"><a class="anchor" href="#gdb使用流程">#</a> gdb 使用流程</h1><h2 id="启动gdb"><a class="anchor" href="#启动gdb">#</a> 启动 gdb</h2><p>编译一个测试程序，-g 表示可以调试，命令如下，原文参考<span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8xNjIxNjQ5NDI=">这里</span></p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>gcc <span class="token parameter variable">-g</span> test.c <span class="token parameter variable">-o</span> <span class="token builtin class-name">test</span></pre></td></tr></table></figure><p>启动 gdb，在 terminal 下键入如下命令：</p><figure class="highlight bash"><figcaption data-lang="bash"></figcaption><table><tr><td data-num="1"></td><td><pre>gdb <span class="token builtin class-name">test</span> </pre></td></tr><tr><td data-num="2"></td><td><pre>gdb <span class="token parameter variable">-q</span> <span class="token builtin class-name">test</span> //表示不打印gdb版本信息，界面较为干净；</pre></td></tr></table></figure><p>测试如下：</p><pre><code class="language-TXT">D:\MyCollege\programming\clanguage&gt;gdb test
GNU gdb (GDB) 7.6.1
Copyright (C) 2013 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;
and &quot;show warranty&quot; for details.
This GDB was configured as &quot;mingw32&quot;.
For bug reporting instructions, please see:
&lt;http://www.gnu.org/software/gdb/bugs/&gt;...
Reading symbols from D:\MyCollege\programming\clanguage\test.exe...done.
(gdb)
</code></pre><p>到此 gdb 启动完成！</p><h2 id="查看源码"><a class="anchor" href="#查看源码">#</a> 查看源码</h2><p>list (简写 l)： 查看源程序代码，默认显示 10 行，按回车键继续看余下的。下面只显示八行是因为只有八行🤭🤭🤭</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>(gdb) l </pre></td></tr><tr><td data-num="2"></td><td><pre>warning: Source file is more recent than executable.</pre></td></tr><tr><td data-num="3"></td><td><pre>1       #include &lt;stdio.h></pre></td></tr><tr><td data-num="4"></td><td><pre>2       int main()</pre></td></tr><tr><td data-num="5"></td><td><pre>3       &#123;</pre></td></tr><tr><td data-num="6"></td><td><pre>4           int a = 10;</pre></td></tr><tr><td data-num="7"></td><td><pre>5           printf("Hello World!\n");</pre></td></tr><tr><td data-num="8"></td><td><pre>6           printf("a = %d\n", a);</pre></td></tr><tr><td data-num="9"></td><td><pre>7           return 0;</pre></td></tr><tr><td data-num="10"></td><td><pre>8       &#125;</pre></td></tr><tr><td data-num="11"></td><td><pre>(gdb)</pre></td></tr></table></figure><h2 id="运行程序"><a class="anchor" href="#运行程序">#</a> 运行程序</h2><p>run (简写 r) ：运行程序直到遇到 结束或者遇到断点等待下一个命令。</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>(gdb) r</pre></td></tr><tr><td data-num="2"></td><td><pre>Starting program: D:\MyCollege\programming\clanguage/test.exe</pre></td></tr><tr><td data-num="3"></td><td><pre>[New Thread 25172.0x569c]</pre></td></tr><tr><td data-num="4"></td><td><pre>[New Thread 25172.0x5930]</pre></td></tr><tr><td data-num="5"></td><td><pre>Hello World!</pre></td></tr><tr><td data-num="6"></td><td><pre>a = 10</pre></td></tr><tr><td data-num="7"></td><td><pre>[Inferior 1 (process 25172) exited normally]</pre></td></tr><tr><td data-num="8"></td><td><pre>(gdb)</pre></td></tr></table></figure><h2 id="设置断点"><a class="anchor" href="#设置断点">#</a> 设置断点</h2><ol><li>break (简写 b) ：格式 b 行号，在某行设置断点；</li><li>info breakpoints ：显示断点信息</li><li>Num： 断点编号</li><li>Disp：断点执行一次之后是否有效 kep：有效 dis：无效</li><li>Enb： 当前断点是否有效 y：有效 n：无效</li><li>Address：内存地址</li><li>What：位置</li></ol><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>(gdb) break 5</pre></td></tr><tr><td data-num="2"></td><td><pre>Breakpoint 1 at 0x401426: file helloworld.c, line 5.</pre></td></tr><tr><td data-num="3"></td><td><pre>(gdb) info breakpoints</pre></td></tr><tr><td data-num="4"></td><td><pre>Num     Type           Disp Enb Address    What</pre></td></tr><tr><td data-num="5"></td><td><pre>1       breakpoint     keep y   0x00401426 in main at helloworld.c:5</pre></td></tr><tr><td data-num="6"></td><td><pre>(gdb)</pre></td></tr></table></figure><h2 id="单步执行"><a class="anchor" href="#单步执行">#</a> 单步执行</h2><p>使用 continue、step、next 命令，三者区别如下：</p><table><thead><tr><th style="text-align:center">Command</th><th style="text-align:center">Difference</th></tr></thead><tbody><tr><td style="text-align:center">continue （简写 c ）</td><td style="text-align:center">继续执行，到下一个断点处（或运行结束）</td></tr><tr><td style="text-align:center">next（简写 n）</td><td style="text-align:center">单步跟踪程序，当遇到函数调用时，也不进入此函数体；此命令同 step 的主要区别是，step 遇到用户自定义的函数，将步进到函数中去运行，而 next 则直接调用函数，不会进入到函数体内。</td></tr><tr><td style="text-align:center">step （简写 s）</td><td style="text-align:center">单步调试如果有函数调用，则进入函数；与命令 n 不同，n 是不进入调用的函数的</td></tr></tbody></table><h2 id="查看变量"><a class="anchor" href="#查看变量">#</a> 查看变量</h2><p>使用 print、whatis 命令</p><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>main () at write.c:28</pre></td></tr><tr><td data-num="2"></td><td><pre>28	    if (fd&lt;0)</pre></td></tr><tr><td data-num="3"></td><td><pre>(gdb) </pre></td></tr><tr><td data-num="4"></td><td><pre>35	        printf("写入的长度：%d\n写入文本内容：%s\n",size1,buf);</pre></td></tr><tr><td data-num="5"></td><td><pre>(gdb) print fd</pre></td></tr><tr><td data-num="6"></td><td><pre>$10 = 3</pre></td></tr><tr><td data-num="7"></td><td><pre>(gdb) whatis fd</pre></td></tr><tr><td data-num="8"></td><td><pre>type = int</pre></td></tr><tr><td data-num="9"></td><td><pre>(gdb)</pre></td></tr></table></figure><h2 id="退出gdb"><a class="anchor" href="#退出gdb">#</a> 退出 gdb</h2><p>用 quit（q）命令退出 gdb：</p><h1 id="gdb基本使用命令"><a class="anchor" href="#gdb基本使用命令">#</a> gdb 基本使用命令</h1><h2 id="运行命令"><a class="anchor" href="#运行命令">#</a> 运行命令</h2><ol><li>run：简记为 r ，其作用是运行程序，当遇到断点后，程序会在断点处停止运行，等待用户输入下一步的命令。</li><li>continue （简写 c ）：继续执行，到下一个断点处（或运行结束）</li><li>next：（简写 n），单步跟踪程序，当遇到函数调用时，也不进入此函数体；此命令同 step 的主要区别是，step 遇到用户自定义的函数，将步进到函数中去运行，而 next 则直接调用函数，不会进入到函数体内。</li><li>step （简写 s）：单步调试如果有函数调用，则进入函数；与命令 n 不同，n 是不进入调用的函数的</li><li>until：当你厌倦了在一个循环体内单步跟踪时，这个命令可以运行程序直到退出循环体。</li><li>until + 行号： 运行至某行，不仅仅用来跳出循环</li><li>finish： 运行程序，直到当前函数完成返回，并打印函数返回时的堆栈地址和返回值及参数值等信息。</li><li>call 函数 (参数)：调用程序中可见的函数，并传递 “参数”，如：call gdb_test (55)</li><li>quit：简记为 q ，退出 gdb</li></ol><h2 id="设置断点-2"><a class="anchor" href="#设置断点-2">#</a> 设置断点</h2><ol><li>break n （简写 b n）: 在第 n 行处设置断点（可以带上代码路径和代码名称： b OAGUPDATE.cpp:578）</li><li>break func（break 缩写为 b）：在函数 func () 的入口处设置断点，如：break cb_button</li><li>delete 断点号 n：删除第 n 个断点</li><li>disable 断点号 n：暂停第 n 个断点</li><li>enable 断点号 n：开启第 n 个断点</li><li>clear 行号 n：清除第 n 行的断点</li><li>info b （info breakpoints） ：显示当前程序的断点设置情况</li><li>delete breakpoints：清除所有断点：</li></ol><h2 id="查看源码-2"><a class="anchor" href="#查看源码-2">#</a> 查看源码</h2><ol><li>list ：简记为 l ，其作用就是列出程序的源代码，默认每次显示 10 行。</li><li>list 行号：将显示当前文件以 “行号” 为中心的前后 10 行代码，如：list 12</li><li>list 函数名：将显示 “函数名” 所在函数的源代码，如：list main</li><li>list ：不带参数，将接着上一次 list 命令的，输出下边的内容。</li></ol><h2 id="打印表达式"><a class="anchor" href="#打印表达式">#</a> 打印表达式</h2><ol><li>print 表达式：简记为 p ，其中 “表达式” 可以是任何当前正在被测试程序的有效表达式，比如当前正在调试 C 语言的程序，那么 “表达式” 可以是任何 C 语言的有效表达式，包括数字，变量甚至是函数调用。<ol><li>print a：将显示整数 a 的值</li><li>print ++a：将把 a 中的值加 1, 并显示出来</li><li>print name：将显示字符串 name 的值</li><li>print gdb_test (22)：将以整数 22 作为参数调用 gdb_test () 函数</li><li>print gdb_test (a)：将以变量 a 作为参数调用 gdb_test () 函数</li></ol></li><li>display 表达式：在单步运行时将非常有用，使用 display 命令设置一个表达式后，它将在每次单步进行指令后，紧接着输出被设置的表达式及值。如： display a</li><li>watch 表达式：设置一个监视点，一旦被监视的 “表达式” 的值改变，gdb 将强行终止正在被调试的程序。如： watch a</li><li>whatis ：查询变量或函数</li><li>info function： 查询函数</li><li>info locals： 显示当前堆栈页的所有变量</li></ol><h2 id="查看运行信息"><a class="anchor" href="#查看运行信息">#</a> 查看运行信息</h2><ol><li>where/bt ：当前运行的堆栈列表；</li><li>bt backtrace 显示当前调用堆栈</li><li>up/down 改变堆栈显示的深度</li><li>set args 参数：指定运行时的参数</li><li>show args：查看设置好的参数</li><li>info program： 来查看程序的是否在运行，进程号，被暂停的原因。</li></ol><h2 id="分割窗口"><a class="anchor" href="#分割窗口">#</a> 分割窗口</h2><ol><li>layout：用于分割窗口，可以一边查看代码，一边测试：</li><li>layout src：显示源代码窗口</li><li>layout asm：显示反汇编窗口</li><li>layout regs：显示源代码 / 反汇编和 CPU 寄存器窗口</li><li>layout split：显示源代码和反汇编窗口</li><li>Ctrl + L：刷新窗口</li></ol><div class="tags"><a href="/tags/gcc/" rel="tag"><i class="ic i-tag"></i> gcc</a> <a href="/tags/gdb/" rel="tag"><i class="ic i-tag"></i> gdb</a> <a href="/tags/c/" rel="tag"><i class="ic i-tag"></i> c</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-08-10 22:00:37" itemprop="dateModified" datetime="2023-08-10T22:00:37+08:00">2023-08-10</time></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Percy Everard <i class="ic i-at"><em>@</em></i>fengyepiaosa</li><li class="link"><strong>本文链接：</strong> <a href="https://percyeverard.github.io/2023/08/03/GDB%E8%B0%83%E8%AF%95/" title="GDB 调试">https://percyeverard.github.io/2023/08/03/GDB调试/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2023/07/31/%E7%9B%B8%E7%88%B1%E5%BE%88%E9%9A%BE/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;07&#x2F;31&#x2F;W9NmjpzuvkfD8TO.png" title="相爱很难"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 金曲共赏</span><h3>相爱很难</h3></a></div><div class="item right"><a href="/2023/08/06/hello-world/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;08&#x2F;06&#x2F;klhqGVa64wj3coR.png" title="Hello World"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 博客历程</span><h3>Hello World</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#before-study"><span class="toc-number">1.</span> <span class="toc-text">Before Study</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#gcc%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">1.1.</span> <span class="toc-text">GCC 简单使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#gcc%E4%BD%BF%E7%94%A8%E9%A1%BB%E7%9F%A5"><span class="toc-number">1.2.</span> <span class="toc-text">GCC 使用须知</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gdb%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">gdb 使用流程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8gdb"><span class="toc-number">2.1.</span> <span class="toc-text">启动 gdb</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%BA%90%E7%A0%81"><span class="toc-number">2.2.</span> <span class="toc-text">查看源码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E7%A8%8B%E5%BA%8F"><span class="toc-number">2.3.</span> <span class="toc-text">运行程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9"><span class="toc-number">2.4.</span> <span class="toc-text">设置断点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E6%AD%A5%E6%89%A7%E8%A1%8C"><span class="toc-number">2.5.</span> <span class="toc-text">单步执行</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%98%E9%87%8F"><span class="toc-number">2.6.</span> <span class="toc-text">查看变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%80%E5%87%BAgdb"><span class="toc-number">2.7.</span> <span class="toc-text">退出 gdb</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#gdb%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">3.</span> <span class="toc-text">gdb 基本使用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-number">3.1.</span> <span class="toc-text">运行命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E6%96%AD%E7%82%B9-2"><span class="toc-number">3.2.</span> <span class="toc-text">设置断点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%BA%90%E7%A0%81-2"><span class="toc-number">3.3.</span> <span class="toc-text">查看源码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.4.</span> <span class="toc-text">打印表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%BF%90%E8%A1%8C%E4%BF%A1%E6%81%AF"><span class="toc-number">3.5.</span> <span class="toc-text">查看运行信息</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%89%B2%E7%AA%97%E5%8F%A3"><span class="toc-number">3.6.</span> <span class="toc-text">分割窗口</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2022/09/28/C-language-micro/" rel="bookmark" title="C++中碰到的那些宏">C++中碰到的那些宏</a></li><li><a href="/2022/10/23/construct/" rel="bookmark" title="C++继承-构造函数">C++继承-构造函数</a></li><li><a href="/2022/11/24/cv2%E6%8A%A5%E9%94%99%E5%A4%84%E7%90%86/" rel="bookmark" title="cv2报错处理">cv2报错处理</a></li><li><a href="/2023/01/23/cplus-use-gplus/" rel="bookmark" title="Linux环境下编译C++文件">Linux环境下编译C++文件</a></li><li><a href="/2023/03/12/vim-elementary-operations/" rel="bookmark" title="vim elementary operations">vim elementary operations</a></li><li><a href="/2023/03/13/c-%E4%B9%8B%E8%BF%B7%E6%83%91%E6%93%8D%E4%BD%9C/" rel="bookmark" title="c++之迷惑操作">c++之迷惑操作</a></li><li><a href="/2023/03/15/%E8%87%AA%E5%AE%9A%E4%B9%89map%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%AF%94%E8%BE%83%E5%87%BD%E6%95%B0%E7%9A%84%E5%9B%9B%E7%A7%8D%E6%96%B9%E6%B3%95/" rel="bookmark" title="自定义map数据类型的比较函数的四种方法">自定义map数据类型的比较函数的四种方法</a></li><li><a href="/2023/03/28/cplusplus-mutable-keyword/" rel="bookmark" title="cplusplus中的mutable keyword">cplusplus中的mutable keyword</a></li><li><a href="/2023/05/25/c-%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E7%AF%87/" rel="bookmark" title="c++学习之内存管理篇">c++学习之内存管理篇</a></li><li><a href="/2023/06/02/%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/" rel="bookmark" title="内存管理">内存管理</a></li><li><a href="/2023/06/05/c%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" rel="bookmark" title="c/c++强制类型转换">c/c++强制类型转换</a></li><li><a href="/2023/06/10/%E6%8C%87%E9%92%88%E5%B8%B8%E9%87%8F%E4%B8%8E%E5%B8%B8%E9%87%8F%E6%8C%87%E9%92%88%E4%BB%A5%E5%8F%8Aconst%E4%BD%BF%E7%94%A8/" rel="bookmark" title="指针常量与常量指针以及const使用">指针常量与常量指针以及const使用</a></li><li><a href="/2023/07/15/bash-shell/" rel="bookmark" title="bash-shell">bash-shell</a></li><li><a href="/2023/07/21/c-%E4%B8%8Etemplate%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" rel="bookmark" title="c++的template简单使用">c++的template简单使用</a></li><li><a href="/2023/07/26/c-c-%E5%BC%BA%E5%88%B6%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/" rel="bookmark" title="c/c++强制类型转换">c/c++强制类型转换</a></li><li><a href="/2023/07/29/bash-shell%E7%BF%92%E9%A1%8C%E7%B7%B4%E7%BF%92%E5%A3%B9/" rel="bookmark" title="bash-shell習題練習壹">bash-shell習題練習壹</a></li><li><a href="/2023/07/29/bash-shell%E7%BF%92%E9%A1%8C%E7%B7%B4%E7%BF%92%E8%B2%B3/" rel="bookmark" title="bash-shell習題練貳">bash-shell習題練貳</a></li><li><a href="/2023/07/31/Linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" rel="bookmark" title="Linux常用指令">Linux常用指令</a></li><li class="active"><a href="/2023/08/03/GDB%E8%B0%83%E8%AF%95/" rel="bookmark" title="GDB调试">GDB调试</a></li><li><a href="/2023/08/07/bash-shell-%E7%BF%92%E9%A1%8C%E7%B7%B4%E7%BF%92%E5%8F%81/" rel="bookmark" title="bash-shell習題練習叁">bash-shell習題練習叁</a></li><li><a href="/2023/08/11/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/" rel="bookmark" title="汇编语言入门教程">汇编语言入门教程</a></li><li><a href="/2023/08/15/x86%E6%B1%87%E7%BC%96%E6%8C%87%E4%BB%A4%E9%9B%86%E6%B1%87%E6%80%BB/" rel="bookmark" title="x86汇编指令集汇总">x86汇编指令集汇总</a></li><li><a href="/2023/08/15/C%E8%AF%AD%E8%A8%80%E6%8C%87%E9%92%88%E8%AF%A6%E8%A7%A3/" rel="bookmark" title="C语言指针详解">C语言指针详解</a></li><li><a href="/2023/10/04/embedded-linux-commands/" rel="bookmark" title="linux commands use often in embedded">linux commands use often in embedded</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Percy Everard" data-src="/images/magic.png"><p class="name" itemprop="name">Percy Everard</p><div class="description" itemprop="description">Really start to record my life, no longer lazy!</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">81</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">8</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">69</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BlcmN5ZXZlcmFyZA==" title="https:&#x2F;&#x2F;github.com&#x2F;percyeverard"><i class="ic i-github"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvbXkvbS9tdXNpYy9wbGF5bGlzdD9pZD0yMjk0OTY3NTIy" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;my&#x2F;m&#x2F;music&#x2F;playlist?id&#x3D;2294967522"><i class="ic i-cloud-music"></i></span> <span class="exturl item email" data-url="bWFpbHRvOmZlbmd5ZXBpYW9zYUAxNjMuY29t" title="mailto:fengyepiaosa@163.com"><i class="ic i-envelope"></i></span> <span class="exturl item instagram" data-url="aHR0cHM6Ly9pbnN0YWdyYW0uY29tL2NoYXJsZXNmZW5n" title="https:&#x2F;&#x2F;instagram.com&#x2F;charlesfeng"><i class="ic i-instagram"></i></span> <span class="exturl item blogger" data-url="aHR0cHM6Ly9jaGVycnlvYS5ibG9nc3BvdC5jb20v" title="https:&#x2F;&#x2F;cherryoa.blogspot.com&#x2F;"><i class="ic i-weibo"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2023/07/31/%E7%9B%B8%E7%88%B1%E5%BE%88%E9%9A%BE/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2023/08/06/hello-world/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; 2021 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-wenfeng"></i> </span><span class="author" itemprop="copyrightHolder">Percy Everard @ Percy Feng</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">218k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">3:18</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2023/08/03/GDB调试/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->